import{S as D,i as P,s as R,y as k,z as G,A as j,g as x,d as A,B,k as $,q as b,a as I,l as v,m as C,r as E,h as p,c as L,n as m,b as N,C as l,L as T,u as q,E as U,F as V}from"../chunks/index.fa5136aa.js";import{C as z}from"../chunks/Card.3fb33f5b.js";import{d as F}from"../chunks/data.31fac3bc.js";function H(n){let t,e,a,s,c,f,d,w,_,i,u,h;return{c(){t=$("div"),e=$("button"),a=b("Get new comic"),s=I(),c=$("h2"),f=b("Comic: "),d=b(n[2]),w=I(),_=$("span"),i=b(n[3]),this.h()},l(r){t=v(r,"DIV",{slot:!0});var o=C(t);e=v(o,"BUTTON",{class:!0});var S=C(e);a=E(S,"Get new comic"),S.forEach(p),s=L(o),c=v(o,"H2",{class:!0});var y=C(c);f=E(y,"Comic: "),d=E(y,n[2]),y.forEach(p),w=L(o),_=v(o,"SPAN",{class:!0});var g=C(_);i=E(g,n[3]),g.forEach(p),o.forEach(p),this.h()},h(){m(e,"class","svelte-leq9px"),m(c,"class","comic_title"),m(_,"class","comic_date"),m(t,"slot","card-header")},m(r,o){N(r,t,o),l(t,e),l(e,a),l(t,s),l(t,c),l(c,f),l(c,d),l(t,w),l(t,_),l(_,i),u||(h=T(e,"click",n[4]),u=!0)},p(r,o){o&4&&q(d,r[2]),o&8&&q(i,r[3])},d(r){r&&p(t),u=!1,h()}}}function M(n){let t,e,a;return{c(){t=$("div"),e=$("img"),this.h()},l(s){t=v(s,"DIV",{slot:!0});var c=C(t);e=v(c,"IMG",{class:!0,src:!0,alt:!0}),c.forEach(p),this.h()},h(){m(e,"class","comic_img svelte-leq9px"),U(e.src,a=n[0])||m(e,"src",a),m(e,"alt",n[1]),m(t,"slot","card-body")},m(s,c){N(s,t,c),l(t,e)},p(s,c){c&1&&!U(e.src,a=s[0])&&m(e,"src",a),c&2&&m(e,"alt",s[1])},d(s){s&&p(t)}}}function O(n){let t,e;return t=new z({props:{$$slots:{"card-body":[M],"card-header":[H]},$$scope:{ctx:n}}}),{c(){k(t.$$.fragment)},l(a){G(t.$$.fragment,a)},m(a,s){j(t,a,s),e=!0},p(a,[s]){const c={};s&143&&(c.$$scope={dirty:s,ctx:a}),t.$set(c)},i(a){e||(x(t.$$.fragment,a),e=!0)},o(a){A(t.$$.fragment,a),e=!1},d(a){B(t,a)}}}function J(n,t,e){let{email:a}=t,s="data:,",c="comic",f="Comic title",d="date";async function w(){const i=new URL("https://fwd.innopolis.app/api/hw2"),u={email:a};return i.search=new URLSearchParams(u).toString(),await fetch(i).then(h=>h.json())}async function _(){const i=await w().then(g=>g.toString()),u=new URL("https://getxkcd.vercel.app/api/comic"),h={num:i};u.search=new URLSearchParams(h).toString();const r=await fetch(u).then(g=>g.json()),o=parseInt(r.year),S=parseInt(r.month)-1,y=parseInt(r.day);e(3,d=new Date(o,S,y).toLocaleDateString()),e(2,f=r.title),e(0,s=r.img),e(1,c=r.alt)}return _(),n.$$set=i=>{"email"in i&&e(5,a=i.email)},[s,c,f,d,_,a]}class K extends D{constructor(t){super(),P(this,t,J,O,R,{email:5})}}function Q(n){let t,e;return t=new K({props:{email:F}}),{c(){k(t.$$.fragment)},l(a){G(t.$$.fragment,a)},m(a,s){j(t,a,s),e=!0},p:V,i(a){e||(x(t.$$.fragment,a),e=!0)},o(a){A(t.$$.fragment,a),e=!1},d(a){B(t,a)}}}class Z extends D{constructor(t){super(),P(this,t,null,Q,R,{})}}export{Z as default};
